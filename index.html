<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>HomeWorkSnap ‚Äì MVP Prototype</title>

<!-- üåà NEW BEAUTIFUL UI STYLES -->
<style>
    :root {
        --bg: #fdf7ee;
        --card: #ffffff;
        --accent: #ff8a2a;
        --accent-soft: #ffe0bf;
        --text-main: #222222;
        --text-muted: #6b7280;
        --border-subtle: #f7cfa3;
    }

    * { box-sizing: border-box; }

    body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        background: radial-gradient(circle at top, #fff3de 0, #fdf7ee 45%, #fbeee1 100%);
        margin: 0;
        padding: 0;
        color: var(--text-main);
    }

    header {
        position: sticky;
        top: 0;
        z-index: 20;
        background: rgba(255, 255, 255, 0.92);
        border-bottom: 1px solid #ffe4c2;
        padding: 10px 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.03);
    }

    header .logo {
        font-weight: 800;
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    header .logo span { font-size: 24px; }

    #container {
        padding: 32px 16px;
        max-width: 960px;
        margin: 0 auto;
        text-align: center;
    }

    h2 {
        margin: 0 0 6px;
        font-size: 32px;
        font-weight: 800;
    }

    .subtitle {
        color: var(--text-muted);
        font-size: 15px;
        margin-bottom: 25px;
    }

    .box {
        text-align: left;
        background: var(--card);
        border-radius: 16px;
        padding: 20px;
        margin-top: 20px;
        border: 1px solid var(--border-subtle);
        box-shadow: 0 12px 34px rgba(0,0,0,0.04);
    }

    input[type="password"],
    textarea {
        width: 100%;
        padding: 12px;
        border-radius: 12px;
        border: 1px solid var(--border-subtle);
        margin-top: 8px;
        font-size: 14px;
    }

    textarea {
        min-height: 140px;
        resize: vertical;
    }

    button {
        padding: 12px 20px;
        border-radius: 999px;
        border: none;
        font-weight: 700;
        cursor: pointer;
        transition: 0.15s;
    }

    .primary {
        background: linear-gradient(135deg, #ff8a2a, #ff6b1a);
        color: white;
        box-shadow: 0 6px 16px rgba(255,122,32,0.4);
    }

    .primary:hover {
        background: linear-gradient(135deg, #ff963f, #ff7b34);
    }

    .secondary {
        background: #fff;
        border: 1px solid var(--accent-soft);
    }

    .secondary:hover {
        background: #fff6e8;
    }

    pre {
        white-space: pre-wrap;
        background: #fff8ec;
        padding: 14px;
        border-radius: 10px;
        border: 1px solid #ffe2bd;
        font-size: 14px;
    }
</style>
</head>

<body>

<header>
    <div class="logo">üì∏ HomeWorkSnap</div>
    <div style="font-size:13px; color:#6b7280">MVP Prototype</div>
</header>

<div id="container">

    <h2>What if homework time didn‚Äôt end in tears?</h2>
    <p class="subtitle">Snap a homework question ‚Üí AI turns it into a parent explanation + kid-friendly steps.</p>

    <!-- API KEY -->
    <div class="box">
        <label><b>Your OpenAI API Key:</b></label>
        <input id="apiKey" type="password" placeholder="sk-..." />
        <small style="color:#6b7280;">Key is stored ONLY in your browser (never uploaded).</small>
    </div>

    <!-- UPLOAD / TEXT -->
    <div class="box">
        <label><b>Upload Homework Image</b></label><br>
        <input id="imageInput" type="file" accept="image/*" />

        <p style="margin-top:10px; font-size:13px;">OR paste homework text:</p>
        <textarea id="textInput" placeholder="Paste homework text here..."></textarea>

        <button class="primary" style="margin-top:12px;" onclick="explainHomework()">Explain Homework</button>
    </div>

    <!-- OUTPUT -->
    <div id="result" class="box" style="display:none;"></div>

</div>

<!-- LOGIC -->
<script>
async function explainHomework() {
    const key = document.getElementById("apiKey").value.trim();
    const text = document.getElementById("textInput").value.trim();
    const img = document.getElementById("imageInput").files[0];

    if (!key) return alert("Enter your OpenAI key first!");
    if (!text && !img) return alert("Upload an image OR paste text.");

    document.getElementById("result").style.display = "block";
    document.getElementById("result").innerHTML = "<p>‚è≥ Snappy is thinking...</p>";

    let inputContent = [];

    if (img) {
        const b64 = await toBase64(img);
        inputContent.push({
            type: "input_image",
            image_url: b64
        });
    }

    if (text) {
        inputContent.push({
            type: "text",
            text
        });
    }

    const response = await fetch("https://api.openai.com/v1/responses", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + key
        },
        body: JSON.stringify({
            model: "gpt-4.1",
            input: [
                {
                    role: "system",
                    content: "You are HomeWorkSnap, an AI that explains homework to parents and then rewrites it so a 9-year-old can understand. ALWAYS provide: 1) Parent Explanation, 2) 9-Year-Old Steps, 3) A simple kid-check question: 'Did that make sense?'"
                },
                {
                    role: "user",
                    content: inputContent
                }
            ]
        })
    });

    const data = await response.json();
    let output = data.output_text || "Error ‚Äî no output text.";

    document.getElementById("result").innerHTML = `<pre>${output}</pre>`;
}

function toBase64(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
    });
}
</script>

</body>
</html>
